2025-12-19 18:22:52.930 [main] INFO  c.h.s.SpringBootStompApplication - Starting SpringBootStompApplication using Java 17.0.9 on LAPTOP-1FK1FC7K with PID 243580 (C:\spring-boot-stomp-websocket\target\classes started by 賈其翔 in C:\spring-boot-stomp-websocket)
2025-12-19 18:22:52.934 [main] DEBUG c.h.s.SpringBootStompApplication - Running with Spring Boot v2.6.1, Spring v5.3.13
2025-12-19 18:22:52.935 [main] INFO  c.h.s.SpringBootStompApplication - No active profile set, falling back to default profiles: default
2025-12-19 18:22:53.665 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-12-19 18:22:53.668 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-19 18:22:53.697 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-12-19 18:22:54.288 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-12-19 18:22:54.302 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-19 18:22:54.304 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-19 18:22:54.305 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.55]
2025-12-19 18:22:54.409 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-19 18:22:54.410 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1397 ms
2025-12-19 18:22:54.780 [main] INFO  c.h.s.config.RedisConfig - Redis 連接工廠已配置：host=localhost, port=6379, database=0, poolMaxActive=8, poolMaxIdle=8, poolMinIdle=0
2025-12-19 18:22:54.887 [main] INFO  c.h.s.service.AgentService - 專員ID管理服務已初始化，Lua腳本已載入
2025-12-19 18:22:55.067 [Finalizer] WARN  i.l.c.r.DefaultClientResources - io.lettuce.core.resource.DefaultClientResources was not shut down properly, shutdown() was not called before it's garbage-collected. Call shutdown() or shutdown(long,long,TimeUnit) 
2025-12-19 18:22:55.224 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/our-websocket/**] in 'stompWebSocketHandlerMapping'
2025-12-19 18:22:55.262 [main] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Looking for @MessageExceptionHandler mappings: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@82ea68c, started on Fri Dec 19 18:22:53 GMT+08:00 2025
2025-12-19 18:22:55.314 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.MessageController:
	{[MESSAGE],[/message]}: message(Principal,Message)
	{[MESSAGE],[/privateMessage]}: privateMessage(Principal,Message)
2025-12-19 18:22:55.317 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.WsController:
	
2025-12-19 18:22:55.318 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.c.AgentController:
	
2025-12-19 18:22:55.319 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.c.ChatHistoryController:
	
2025-12-19 18:22:55.320 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.c.HeartbeatController:
	{[MESSAGE],[/heartbeat]}: handleHeartbeat(Principal,HeartbeatMessage)
2025-12-19 18:22:55.323 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-12-19 18:22:55.349 [main] INFO  c.h.s.config.RedisConfig - RedisMessageListenerContainer 專用連接工廠已配置：host=localhost, port=6379, database=0（非池化）
2025-12-19 18:22:55.354 [main] INFO  c.h.s.config.RedisConfig - RedisMessageListenerContainer 已配置，將在應用程式啟動後自動連接 Redis
2025-12-19 18:22:55.499 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-12-19 18:22:55.652 [Finalizer] WARN  i.l.c.r.DefaultClientResources - io.lettuce.core.resource.DefaultClientResources was not shut down properly, shutdown() was not called before it's garbage-collected. Call shutdown() or shutdown(long,long,TimeUnit) 
2025-12-19 18:22:56.012 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-12-19 18:22:56.017 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 8080 is already in use
2025-12-19 18:22:56.253 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-12-19 18:22:56.254 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-12-19 18:22:56.263 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-12-19 18:22:56.265 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-8080"]
2025-12-19 18:22:56.274 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2025-12-19 18:22:56.294 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.


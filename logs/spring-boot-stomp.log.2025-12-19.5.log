2025-12-19 18:22:07.996 [main] INFO  c.h.s.SpringBootStompApplication - Starting SpringBootStompApplication using Java 17.0.9 on LAPTOP-1FK1FC7K with PID 232332 (C:\spring-boot-stomp-websocket\target\classes started by 賈其翔 in C:\spring-boot-stomp-websocket)
2025-12-19 18:22:07.999 [main] DEBUG c.h.s.SpringBootStompApplication - Running with Spring Boot v2.6.1, Spring v5.3.13
2025-12-19 18:22:08.000 [main] INFO  c.h.s.SpringBootStompApplication - No active profile set, falling back to default profiles: default
2025-12-19 18:22:08.755 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-12-19 18:22:08.760 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-19 18:22:08.799 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-12-19 18:22:09.492 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-12-19 18:22:09.511 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-19 18:22:09.512 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-19 18:22:09.513 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.55]
2025-12-19 18:22:09.620 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-19 18:22:09.620 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1544 ms
2025-12-19 18:22:10.050 [main] INFO  c.h.s.config.RedisConfig - Redis 連接工廠已配置：host=localhost, port=6379, database=0, poolMaxActive=8, poolMaxIdle=8, poolMinIdle=0
2025-12-19 18:22:10.171 [main] INFO  c.h.s.service.AgentService - 專員ID管理服務已初始化，Lua腳本已載入
2025-12-19 18:22:10.376 [Finalizer] WARN  i.l.c.r.DefaultClientResources - io.lettuce.core.resource.DefaultClientResources was not shut down properly, shutdown() was not called before it's garbage-collected. Call shutdown() or shutdown(long,long,TimeUnit) 
2025-12-19 18:22:10.569 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/our-websocket/**] in 'stompWebSocketHandlerMapping'
2025-12-19 18:22:10.613 [main] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Looking for @MessageExceptionHandler mappings: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@82ea68c, started on Fri Dec 19 18:22:08 GMT+08:00 2025
2025-12-19 18:22:10.666 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.MessageController:
	{[MESSAGE],[/message]}: message(Principal,Message)
	{[MESSAGE],[/privateMessage]}: privateMessage(Principal,Message)
2025-12-19 18:22:10.669 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.WsController:
	
2025-12-19 18:22:10.670 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.c.AgentController:
	
2025-12-19 18:22:10.671 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.c.ChatHistoryController:
	
2025-12-19 18:22:10.671 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.c.HeartbeatController:
	{[MESSAGE],[/heartbeat]}: handleHeartbeat(Principal,HeartbeatMessage)
2025-12-19 18:22:10.677 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-12-19 18:22:10.699 [main] INFO  c.h.s.config.RedisConfig - RedisMessageListenerContainer 專用連接工廠已配置：host=localhost, port=6379, database=0（非池化）
2025-12-19 18:22:10.705 [main] INFO  c.h.s.config.RedisConfig - RedisMessageListenerContainer 已配置，將在應用程式啟動後自動連接 Redis
2025-12-19 18:22:10.839 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-12-19 18:22:10.948 [Finalizer] WARN  i.l.c.r.DefaultClientResources - io.lettuce.core.resource.DefaultClientResources was not shut down properly, shutdown() was not called before it's garbage-collected. Call shutdown() or shutdown(long,long,TimeUnit) 
2025-12-19 18:22:11.328 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-12-19 18:22:11.338 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 8080 is already in use
2025-12-19 18:22:11.596 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-12-19 18:22:11.597 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-12-19 18:22:11.605 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-12-19 18:22:11.608 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-8080"]
2025-12-19 18:22:11.616 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2025-12-19 18:22:11.648 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.


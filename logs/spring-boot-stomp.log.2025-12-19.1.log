2025-12-19 15:51:59.991 [main] INFO  c.h.s.SpringBootStompApplication - Starting SpringBootStompApplication using Java 17.0.9 on LAPTOP-1FK1FC7K with PID 166548 (C:\spring-boot-stomp-websocket\target\classes started by 賈其翔 in C:\spring-boot-stomp-websocket)
2025-12-19 15:51:59.997 [main] DEBUG c.h.s.SpringBootStompApplication - Running with Spring Boot v2.6.1, Spring v5.3.13
2025-12-19 15:51:59.998 [main] INFO  c.h.s.SpringBootStompApplication - No active profile set, falling back to default profiles: default
2025-12-19 15:52:00.780 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
2025-12-19 15:52:00.783 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-19 15:52:00.811 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-12-19 15:52:01.433 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-12-19 15:52:01.447 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-19 15:52:01.448 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-19 15:52:01.448 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.55]
2025-12-19 15:52:01.546 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-19 15:52:01.546 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1451 ms
2025-12-19 15:52:02.406 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/our-websocket/**] in 'stompWebSocketHandlerMapping'
2025-12-19 15:52:02.459 [main] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Looking for @MessageExceptionHandler mappings: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@41ab013, started on Fri Dec 19 15:52:00 GMT+08:00 2025
2025-12-19 15:52:02.527 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.MessageController:
	{[MESSAGE],[/message]}: message(Message)
	{[MESSAGE],[/privateMessage]}: privateMessage(Principal,Message)
2025-12-19 15:52:02.530 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.WsController:
	
2025-12-19 15:52:02.531 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.h.s.c.HeartbeatController:
	{[MESSAGE],[/heartbeat]}: handleHeartbeat(Principal,HeartbeatMessage)
2025-12-19 15:52:02.539 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-12-19 15:52:02.563 [main] INFO  c.h.s.config.RedisConfig - RedisMessageListenerContainer 已配置，將在應用程式啟動後自動連接 Redis
2025-12-19 15:52:02.729 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-12-19 15:52:03.257 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-12-19 15:52:03.289 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-12-19 15:52:03.291 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-12-19 15:52:03.291 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/ws/]]
2025-12-19 15:52:03.292 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-12-19 15:52:03.292 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3688baab]
2025-12-19 15:52:03.292 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3688baab]
2025-12-19 15:52:03.292 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3688baab]]
2025-12-19 15:52:03.292 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-12-19 15:52:03.292 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-12-19 15:52:03.292 [main] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-12-19 15:52:03.850 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:52:08.308 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: [localhost:5672]
2025-12-19 15:52:08.377 [main] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: rabbitConnectionFactory#4c319d52:0/SimpleConnection@2e3cd732 [delegate=amqp://guest@127.0.0.1:5672/, localPort= 64716]
2025-12-19 15:52:08.456 [main] INFO  c.h.s.SpringBootStompApplication - Started SpringBootStompApplication in 9.404 seconds (JVM running for 10.233)
2025-12-19 15:52:08.878 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:52:13.888 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:52:18.902 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:52:23.922 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:52:28.936 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:52:33.951 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:52:38.970 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:52:43.980 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:52:48.999 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:52:54.007 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:52:59.023 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:02.425 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-12-19 15:53:04.035 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:09.044 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:14.059 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:19.075 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:24.082 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:24.218 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19 15:53:24.219 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-19 15:53:24.221 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-19 15:53:24.548 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3c54ddec
2025-12-19 15:53:24.550 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/our-websocket/info?t=1766130804545
2025-12-19 15:53:24.561 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3c54ddec
2025-12-19 15:53:24.571 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/our-websocket/463/u2ja0uv2/websocket
2025-12-19 15:53:24.579 [http-nio-8080-exec-4] INFO  c.h.s.Userhandshakehandler - 登入用戶 ID: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:24.642 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=u2ja0uv2]
2025-12-19 15:53:24.663 [http-nio-8080-exec-4] TRACE o.s.m.simp.stomp.StompDecoder - Decoded CONNECT {accept-version=[1.1,1.0], heart-beat=[10000,10000]} session=null
2025-12-19 15:53:24.664 [http-nio-8080-exec-4] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: CONNECT user=576727c41b68434c9788d8788dd3d508 session=u2ja0uv2
2025-12-19 15:53:24.665 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:24.665 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: CONNECT
2025-12-19 15:53:24.665 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: null
2025-12-19 15:53:24.667 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: u2ja0uv2
2025-12-19 15:53:24.667 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:24.667 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:24.667 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): CONNECT
2025-12-19 15:53:24.668 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=576727c41b68434c9788d8788dd3d508 session=u2ja0uv2
2025-12-19 15:53:24.672 [clientOutboundChannel-1] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP CONNECTED, headers={version=[1.1], heart-beat=[0,0], user-name=[576727c41b68434c9788d8788dd3d508]}
2025-12-19 15:53:24.676 [http-nio-8080-exec-5] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SUBSCRIBE {id=[sub-0], destination=[/topic/chat]} session=null
2025-12-19 15:53:24.677 [http-nio-8080-exec-5] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SUBSCRIBE /topic/chat id=sub-0 session=u2ja0uv2
2025-12-19 15:53:24.677 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:24.677 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SUBSCRIBE
2025-12-19 15:53:24.677 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /topic/chat
2025-12-19 15:53:24.677 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: u2ja0uv2
2025-12-19 15:53:24.677 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:24.677 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:24.677 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): SUBSCRIBE
2025-12-19 15:53:24.678 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/chat id=sub-0 session=u2ja0uv2
2025-12-19 15:53:24.680 [http-nio-8080-exec-5] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SUBSCRIBE {id=[sub-1], destination=[/user/topic/privateMessage]} session=null
2025-12-19 15:53:24.680 [http-nio-8080-exec-5] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SUBSCRIBE /user/topic/privateMessage id=sub-1 session=u2ja0uv2
2025-12-19 15:53:24.680 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:24.680 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SUBSCRIBE
2025-12-19 15:53:24.680 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /user/topic/privateMessage
2025-12-19 15:53:24.680 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: u2ja0uv2
2025-12-19 15:53:24.680 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:24.680 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:24.680 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): SUBSCRIBE
2025-12-19 15:53:24.683 [clientInboundChannel-9] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/topic/privateMessage -> [/topic/privateMessage-useru2ja0uv2]
2025-12-19 15:53:24.684 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/topic/privateMessage-useru2ja0uv2 subscriptionId=sub-1 session=u2ja0uv2 user=576727c41b68434c9788d8788dd3d508 payload=byte[0]
2025-12-19 15:53:29.095 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:30.183 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3c54ddec
2025-12-19 15:53:30.185 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/our-websocket/info?t=1766130810180
2025-12-19 15:53:30.209 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3c54ddec
2025-12-19 15:53:30.211 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/our-websocket/331/ok3gjou4/websocket
2025-12-19 15:53:30.211 [http-nio-8080-exec-9] INFO  c.h.s.Userhandshakehandler - 登入用戶 ID: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:30.216 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ok3gjou4]
2025-12-19 15:53:30.231 [http-nio-8080-exec-10] TRACE o.s.m.simp.stomp.StompDecoder - Decoded CONNECT {accept-version=[1.1,1.0], heart-beat=[10000,10000]} session=null
2025-12-19 15:53:30.231 [http-nio-8080-exec-10] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: CONNECT user=75ef8e90f4a14c37a6055be614132d3d session=ok3gjou4
2025-12-19 15:53:30.231 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:30.232 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: CONNECT
2025-12-19 15:53:30.232 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: null
2025-12-19 15:53:30.232 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: ok3gjou4
2025-12-19 15:53:30.233 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:30.233 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:30.233 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): CONNECT
2025-12-19 15:53:30.234 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=75ef8e90f4a14c37a6055be614132d3d session=ok3gjou4
2025-12-19 15:53:30.235 [clientOutboundChannel-2] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP CONNECTED, headers={version=[1.1], heart-beat=[0,0], user-name=[75ef8e90f4a14c37a6055be614132d3d]}
2025-12-19 15:53:30.238 [http-nio-8080-exec-1] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SUBSCRIBE {id=[sub-0], destination=[/topic/chat]} session=null
2025-12-19 15:53:30.239 [http-nio-8080-exec-1] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SUBSCRIBE /topic/chat id=sub-0 session=ok3gjou4
2025-12-19 15:53:30.239 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:30.240 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SUBSCRIBE
2025-12-19 15:53:30.240 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /topic/chat
2025-12-19 15:53:30.240 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: ok3gjou4
2025-12-19 15:53:30.240 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:30.240 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:30.240 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): SUBSCRIBE
2025-12-19 15:53:30.241 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/chat id=sub-0 session=ok3gjou4
2025-12-19 15:53:30.241 [http-nio-8080-exec-1] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SUBSCRIBE {id=[sub-1], destination=[/user/topic/privateMessage]} session=null
2025-12-19 15:53:30.241 [http-nio-8080-exec-1] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SUBSCRIBE /user/topic/privateMessage id=sub-1 session=ok3gjou4
2025-12-19 15:53:30.241 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:30.241 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SUBSCRIBE
2025-12-19 15:53:30.242 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /user/topic/privateMessage
2025-12-19 15:53:30.242 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: ok3gjou4
2025-12-19 15:53:30.242 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:30.242 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:30.243 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): SUBSCRIBE
2025-12-19 15:53:30.244 [clientInboundChannel-18] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/topic/privateMessage -> [/topic/privateMessage-userok3gjou4]
2025-12-19 15:53:30.244 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/topic/privateMessage-userok3gjou4 subscriptionId=sub-1 session=ok3gjou4 user=75ef8e90f4a14c37a6055be614132d3d payload=byte[0]
2025-12-19 15:53:34.106 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:39.120 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:44.135 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:44.185 [http-nio-8080-exec-2] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/privateMessage], content-length=[60]} session=null
2025-12-19 15:53:44.185 [http-nio-8080-exec-2] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/privateMessage session=u2ja0uv2
2025-12-19 15:53:44.185 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:44.185 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:53:44.185 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/privateMessage
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: u2ja0uv2
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, 34, 44, 34, 105, 100, 34, 58, 34, 55, 53, 101, 102, 56, 101, 57, 48, 102, 52, 97, 49, 52, 99, 51, 55, 97, 54, 48, 53, 53, 98, 101, 54, 49, 52, 49, 51, 50, 100, 51, 100, 34, 125]
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@2bd836a4, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/privateMessage}
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試","id":"75ef8e90f4a14c37a6055be614132d3d"}
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/privateMessage
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /privateMessage
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/privateMessage")
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:44.186 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:53:44.187 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:53:44.187 [http-nio-8080-exec-2] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@2bd836a4, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/privateMessage}
2025-12-19 15:53:44.187 [http-nio-8080-exec-2] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/privateMessage
2025-12-19 15:53:44.187 [clientInboundChannel-19] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/privateMessage session=u2ja0uv2, lookupDestination='/privateMessage'
2025-12-19 15:53:44.189 [clientInboundChannel-19] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/privateMessage]}]
2025-12-19 15:53:44.189 [clientInboundChannel-19] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#privateMessage[2 args]
2025-12-19 15:53:44.222 [clientInboundChannel-19] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [576727c41b68434c9788d8788dd3d508, Message(content=測試, recipient=null, id=75ef8e90f4a14c37a6055be614132d3d)]
2025-12-19 15:53:44.223 [clientInboundChannel-19] ERROR c.h.s.MessageController - === 私信接收開始（ERROR 級別確保可見） ===
2025-12-19 15:53:44.223 [clientInboundChannel-19] INFO  c.h.s.MessageController - === 私信接收開始 ===
2025-12-19 15:53:44.223 [clientInboundChannel-19] INFO  c.h.s.MessageController - 收到私信請求，發送者: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:44.223 [clientInboundChannel-19] INFO  c.h.s.MessageController - 訊息物件: Message(content=測試, recipient=null, id=75ef8e90f4a14c37a6055be614132d3d)
2025-12-19 15:53:44.225 [clientInboundChannel-19] INFO  c.h.s.MessageController - === 私信發送調試 ===
2025-12-19 15:53:44.225 [clientInboundChannel-19] INFO  c.h.s.MessageController - 發送者ID: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:44.225 [clientInboundChannel-19] INFO  c.h.s.MessageController - 接收者ID: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:44.225 [clientInboundChannel-19] INFO  c.h.s.MessageController - 訊息內容: 測試
2025-12-19 15:53:44.225 [clientInboundChannel-19] INFO  c.h.s.MessageController - 目標路徑: /user/75ef8e90f4a14c37a6055be614132d3d/topic/privateMessage
2025-12-19 15:53:44.230 [clientInboundChannel-19] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/75ef8e90f4a14c37a6055be614132d3d/topic/privateMessage -> [/topic/privateMessage-userok3gjou4]
2025-12-19 15:53:44.230 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/privateMessage-userok3gjou4 session=null payload={"content":"用戶：576727c41b68434c9788d8788dd3d508發送的信息：測試"}
2025-12-19 15:53:44.231 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-12-19 15:53:44.232 [clientInboundChannel-19] INFO  c.h.s.MessageController - 私信已發送到目標用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:44.232 [clientInboundChannel-19] INFO  c.h.s.MessageController - === 私信處理完成 ===
2025-12-19 15:53:44.232 [clientOutboundChannel-3] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP MESSAGE, headers={destination=[/user/topic/privateMessage], content-type=[application/json], subscription=[sub-1], message-id=[ok3gjou4-0]}
2025-12-19 15:53:44.647 [http-nio-8080-exec-3] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/privateMessage], content-length=[60]} session=null
2025-12-19 15:53:44.647 [http-nio-8080-exec-3] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/privateMessage session=u2ja0uv2
2025-12-19 15:53:44.647 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:44.647 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:53:44.647 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/privateMessage
2025-12-19 15:53:44.647 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: u2ja0uv2
2025-12-19 15:53:44.647 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:44.648 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:44.648 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:53:44.648 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:53:44.648 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, 34, 44, 34, 105, 100, 34, 58, 34, 55, 53, 101, 102, 56, 101, 57, 48, 102, 52, 97, 49, 52, 99, 51, 55, 97, 54, 48, 53, 53, 98, 101, 54, 49, 52, 49, 51, 50, 100, 51, 100, 34, 125]
2025-12-19 15:53:44.649 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@1411009b, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/privateMessage}
2025-12-19 15:53:44.649 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試","id":"75ef8e90f4a14c37a6055be614132d3d"}
2025-12-19 15:53:44.649 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/privateMessage
2025-12-19 15:53:44.649 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /privateMessage
2025-12-19 15:53:44.649 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/privateMessage")
2025-12-19 15:53:44.649 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:44.650 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:53:44.650 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:53:44.650 [http-nio-8080-exec-3] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@1411009b, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/privateMessage}
2025-12-19 15:53:44.650 [http-nio-8080-exec-3] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/privateMessage
2025-12-19 15:53:44.651 [clientInboundChannel-22] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/privateMessage session=u2ja0uv2, lookupDestination='/privateMessage'
2025-12-19 15:53:44.651 [clientInboundChannel-22] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/privateMessage]}]
2025-12-19 15:53:44.651 [clientInboundChannel-22] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#privateMessage[2 args]
2025-12-19 15:53:44.651 [clientInboundChannel-22] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [576727c41b68434c9788d8788dd3d508, Message(content=測試, recipient=null, id=75ef8e90f4a14c37a6055be614132d3d)]
2025-12-19 15:53:44.651 [clientInboundChannel-22] ERROR c.h.s.MessageController - === 私信接收開始（ERROR 級別確保可見） ===
2025-12-19 15:53:44.651 [clientInboundChannel-22] INFO  c.h.s.MessageController - === 私信接收開始 ===
2025-12-19 15:53:44.651 [clientInboundChannel-22] INFO  c.h.s.MessageController - 收到私信請求，發送者: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:44.651 [clientInboundChannel-22] INFO  c.h.s.MessageController - 訊息物件: Message(content=測試, recipient=null, id=75ef8e90f4a14c37a6055be614132d3d)
2025-12-19 15:53:44.651 [clientInboundChannel-22] INFO  c.h.s.MessageController - === 私信發送調試 ===
2025-12-19 15:53:44.651 [clientInboundChannel-22] INFO  c.h.s.MessageController - 發送者ID: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:44.652 [clientInboundChannel-22] INFO  c.h.s.MessageController - 接收者ID: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:44.652 [clientInboundChannel-22] INFO  c.h.s.MessageController - 訊息內容: 測試
2025-12-19 15:53:44.652 [clientInboundChannel-22] INFO  c.h.s.MessageController - 目標路徑: /user/75ef8e90f4a14c37a6055be614132d3d/topic/privateMessage
2025-12-19 15:53:44.652 [clientInboundChannel-22] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/75ef8e90f4a14c37a6055be614132d3d/topic/privateMessage -> [/topic/privateMessage-userok3gjou4]
2025-12-19 15:53:44.652 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/privateMessage-userok3gjou4 session=null payload={"content":"用戶：576727c41b68434c9788d8788dd3d508發送的信息：測試"}
2025-12-19 15:53:44.652 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-12-19 15:53:44.653 [clientInboundChannel-22] INFO  c.h.s.MessageController - 私信已發送到目標用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:44.653 [clientInboundChannel-22] INFO  c.h.s.MessageController - === 私信處理完成 ===
2025-12-19 15:53:44.653 [clientOutboundChannel-4] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP MESSAGE, headers={destination=[/user/topic/privateMessage], content-type=[application/json], subscription=[sub-1], message-id=[ok3gjou4-1]}
2025-12-19 15:53:45.501 [http-nio-8080-exec-4] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/privateMessage], content-length=[66]} session=null
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/privateMessage session=u2ja0uv2
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/privateMessage
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: u2ja0uv2
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, -26, -72, -84, -24, -87, -90, 34, 44, 34, 105, 100, 34, 58, 34, 55, 53, 101, 102, 56, 101, 57, 48, 102, 52, 97, 49, 52, 99, 51, 55, 97, 54, 48, 53, 53, 98, 101, 54, 49, 52, 49, 51, 50, 100, 51, 100, 34, 125]
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[66]}, simpSessionAttributes={}, simpHeartbeat=[J@7c285749, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/privateMessage}
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試測試","id":"75ef8e90f4a14c37a6055be614132d3d"}
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/privateMessage
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /privateMessage
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/privateMessage")
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:45.502 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:53:45.503 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:53:45.503 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[66]}, simpSessionAttributes={}, simpHeartbeat=[J@7c285749, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/privateMessage}
2025-12-19 15:53:45.503 [http-nio-8080-exec-4] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/privateMessage
2025-12-19 15:53:45.503 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/privateMessage session=u2ja0uv2, lookupDestination='/privateMessage'
2025-12-19 15:53:45.503 [clientInboundChannel-25] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/privateMessage]}]
2025-12-19 15:53:45.503 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#privateMessage[2 args]
2025-12-19 15:53:45.504 [clientInboundChannel-25] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [576727c41b68434c9788d8788dd3d508, Message(content=測試測試, recipient=null, id=75ef8e90f4a14c37a6055be614132d3d)]
2025-12-19 15:53:45.504 [clientInboundChannel-25] ERROR c.h.s.MessageController - === 私信接收開始（ERROR 級別確保可見） ===
2025-12-19 15:53:45.505 [clientInboundChannel-25] INFO  c.h.s.MessageController - === 私信接收開始 ===
2025-12-19 15:53:45.505 [clientInboundChannel-25] INFO  c.h.s.MessageController - 收到私信請求，發送者: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:45.505 [clientInboundChannel-25] INFO  c.h.s.MessageController - 訊息物件: Message(content=測試測試, recipient=null, id=75ef8e90f4a14c37a6055be614132d3d)
2025-12-19 15:53:45.505 [clientInboundChannel-25] INFO  c.h.s.MessageController - === 私信發送調試 ===
2025-12-19 15:53:45.506 [clientInboundChannel-25] INFO  c.h.s.MessageController - 發送者ID: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:45.506 [clientInboundChannel-25] INFO  c.h.s.MessageController - 接收者ID: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:45.506 [clientInboundChannel-25] INFO  c.h.s.MessageController - 訊息內容: 測試測試
2025-12-19 15:53:45.506 [clientInboundChannel-25] INFO  c.h.s.MessageController - 目標路徑: /user/75ef8e90f4a14c37a6055be614132d3d/topic/privateMessage
2025-12-19 15:53:45.506 [clientInboundChannel-25] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/75ef8e90f4a14c37a6055be614132d3d/topic/privateMessage -> [/topic/privateMessage-userok3gjou4]
2025-12-19 15:53:45.507 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/privateMessage-userok3gjou4 session=null payload={"content":"用戶：576727c41b68434c9788d8788dd3d508發送的信息：測試測...(truncated)
2025-12-19 15:53:45.507 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-12-19 15:53:45.507 [clientInboundChannel-25] INFO  c.h.s.MessageController - 私信已發送到目標用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:45.507 [clientInboundChannel-25] INFO  c.h.s.MessageController - === 私信處理完成 ===
2025-12-19 15:53:45.507 [clientOutboundChannel-5] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP MESSAGE, headers={destination=[/user/topic/privateMessage], content-type=[application/json], subscription=[sub-1], message-id=[ok3gjou4-2]}
2025-12-19 15:53:46.166 [http-nio-8080-exec-5] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/privateMessage], content-length=[60]} session=null
2025-12-19 15:53:46.168 [http-nio-8080-exec-5] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/privateMessage session=u2ja0uv2
2025-12-19 15:53:46.169 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:46.170 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:53:46.170 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/privateMessage
2025-12-19 15:53:46.170 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: u2ja0uv2
2025-12-19 15:53:46.170 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:46.170 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:46.170 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:53:46.170 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:53:46.170 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, 34, 44, 34, 105, 100, 34, 58, 34, 55, 53, 101, 102, 56, 101, 57, 48, 102, 52, 97, 49, 52, 99, 51, 55, 97, 54, 48, 53, 53, 98, 101, 54, 49, 52, 49, 51, 50, 100, 51, 100, 34, 125]
2025-12-19 15:53:46.170 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@3cbd6a8a, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/privateMessage}
2025-12-19 15:53:46.171 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試","id":"75ef8e90f4a14c37a6055be614132d3d"}
2025-12-19 15:53:46.171 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/privateMessage
2025-12-19 15:53:46.171 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /privateMessage
2025-12-19 15:53:46.171 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/privateMessage")
2025-12-19 15:53:46.171 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:46.171 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:53:46.171 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:53:46.171 [http-nio-8080-exec-5] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@3cbd6a8a, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/privateMessage}
2025-12-19 15:53:46.172 [http-nio-8080-exec-5] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/privateMessage
2025-12-19 15:53:46.172 [clientInboundChannel-28] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/privateMessage session=u2ja0uv2, lookupDestination='/privateMessage'
2025-12-19 15:53:46.172 [clientInboundChannel-28] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/privateMessage]}]
2025-12-19 15:53:46.172 [clientInboundChannel-28] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#privateMessage[2 args]
2025-12-19 15:53:46.172 [clientInboundChannel-28] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [576727c41b68434c9788d8788dd3d508, Message(content=測試, recipient=null, id=75ef8e90f4a14c37a6055be614132d3d)]
2025-12-19 15:53:46.172 [clientInboundChannel-28] ERROR c.h.s.MessageController - === 私信接收開始（ERROR 級別確保可見） ===
2025-12-19 15:53:46.172 [clientInboundChannel-28] INFO  c.h.s.MessageController - === 私信接收開始 ===
2025-12-19 15:53:46.172 [clientInboundChannel-28] INFO  c.h.s.MessageController - 收到私信請求，發送者: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:46.172 [clientInboundChannel-28] INFO  c.h.s.MessageController - 訊息物件: Message(content=測試, recipient=null, id=75ef8e90f4a14c37a6055be614132d3d)
2025-12-19 15:53:46.172 [clientInboundChannel-28] INFO  c.h.s.MessageController - === 私信發送調試 ===
2025-12-19 15:53:46.172 [clientInboundChannel-28] INFO  c.h.s.MessageController - 發送者ID: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:46.172 [clientInboundChannel-28] INFO  c.h.s.MessageController - 接收者ID: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:46.172 [clientInboundChannel-28] INFO  c.h.s.MessageController - 訊息內容: 測試
2025-12-19 15:53:46.173 [clientInboundChannel-28] INFO  c.h.s.MessageController - 目標路徑: /user/75ef8e90f4a14c37a6055be614132d3d/topic/privateMessage
2025-12-19 15:53:46.173 [clientInboundChannel-28] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/75ef8e90f4a14c37a6055be614132d3d/topic/privateMessage -> [/topic/privateMessage-userok3gjou4]
2025-12-19 15:53:46.173 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/privateMessage-userok3gjou4 session=null payload={"content":"用戶：576727c41b68434c9788d8788dd3d508發送的信息：測試"}
2025-12-19 15:53:46.173 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-12-19 15:53:46.173 [clientInboundChannel-28] INFO  c.h.s.MessageController - 私信已發送到目標用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:46.173 [clientInboundChannel-28] INFO  c.h.s.MessageController - === 私信處理完成 ===
2025-12-19 15:53:46.174 [clientOutboundChannel-6] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP MESSAGE, headers={destination=[/user/topic/privateMessage], content-type=[application/json], subscription=[sub-1], message-id=[ok3gjou4-3]}
2025-12-19 15:53:46.661 [http-nio-8080-exec-6] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/privateMessage], content-length=[60]} session=null
2025-12-19 15:53:46.661 [http-nio-8080-exec-6] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/privateMessage session=u2ja0uv2
2025-12-19 15:53:46.661 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:46.661 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/privateMessage
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: u2ja0uv2
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, 34, 44, 34, 105, 100, 34, 58, 34, 55, 53, 101, 102, 56, 101, 57, 48, 102, 52, 97, 49, 52, 99, 51, 55, 97, 54, 48, 53, 53, 98, 101, 54, 49, 52, 49, 51, 50, 100, 51, 100, 34, 125]
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@42318737, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/privateMessage}
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試","id":"75ef8e90f4a14c37a6055be614132d3d"}
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/privateMessage
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /privateMessage
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/privateMessage")
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@42318737, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/privateMessage}
2025-12-19 15:53:46.662 [http-nio-8080-exec-6] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/privateMessage
2025-12-19 15:53:46.662 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/privateMessage session=u2ja0uv2, lookupDestination='/privateMessage'
2025-12-19 15:53:46.662 [clientInboundChannel-31] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/privateMessage]}]
2025-12-19 15:53:46.663 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#privateMessage[2 args]
2025-12-19 15:53:46.664 [clientInboundChannel-31] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [576727c41b68434c9788d8788dd3d508, Message(content=測試, recipient=null, id=75ef8e90f4a14c37a6055be614132d3d)]
2025-12-19 15:53:46.664 [clientInboundChannel-31] ERROR c.h.s.MessageController - === 私信接收開始（ERROR 級別確保可見） ===
2025-12-19 15:53:46.664 [clientInboundChannel-31] INFO  c.h.s.MessageController - === 私信接收開始 ===
2025-12-19 15:53:46.664 [clientInboundChannel-31] INFO  c.h.s.MessageController - 收到私信請求，發送者: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:46.664 [clientInboundChannel-31] INFO  c.h.s.MessageController - 訊息物件: Message(content=測試, recipient=null, id=75ef8e90f4a14c37a6055be614132d3d)
2025-12-19 15:53:46.664 [clientInboundChannel-31] INFO  c.h.s.MessageController - === 私信發送調試 ===
2025-12-19 15:53:46.664 [clientInboundChannel-31] INFO  c.h.s.MessageController - 發送者ID: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:46.664 [clientInboundChannel-31] INFO  c.h.s.MessageController - 接收者ID: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:46.664 [clientInboundChannel-31] INFO  c.h.s.MessageController - 訊息內容: 測試
2025-12-19 15:53:46.664 [clientInboundChannel-31] INFO  c.h.s.MessageController - 目標路徑: /user/75ef8e90f4a14c37a6055be614132d3d/topic/privateMessage
2025-12-19 15:53:46.665 [clientInboundChannel-31] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/75ef8e90f4a14c37a6055be614132d3d/topic/privateMessage -> [/topic/privateMessage-userok3gjou4]
2025-12-19 15:53:46.665 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/privateMessage-userok3gjou4 session=null payload={"content":"用戶：576727c41b68434c9788d8788dd3d508發送的信息：測試"}
2025-12-19 15:53:46.666 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-12-19 15:53:46.667 [clientInboundChannel-31] INFO  c.h.s.MessageController - 私信已發送到目標用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:46.667 [clientInboundChannel-31] INFO  c.h.s.MessageController - === 私信處理完成 ===
2025-12-19 15:53:46.668 [clientOutboundChannel-7] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP MESSAGE, headers={destination=[/user/topic/privateMessage], content-type=[application/json], subscription=[sub-1], message-id=[ok3gjou4-4]}
2025-12-19 15:53:49.152 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:54.169 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:59.173 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:53:59.368 [http-nio-8080-exec-7] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/privateMessage], content-length=[60]} session=null
2025-12-19 15:53:59.369 [http-nio-8080-exec-7] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/privateMessage session=ok3gjou4
2025-12-19 15:53:59.370 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:59.370 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:53:59.370 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/privateMessage
2025-12-19 15:53:59.370 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: ok3gjou4
2025-12-19 15:53:59.371 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:59.371 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:59.371 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:53:59.371 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:53:59.371 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, 34, 44, 34, 105, 100, 34, 58, 34, 53, 55, 54, 55, 50, 55, 99, 52, 49, 98, 54, 56, 52, 51, 52, 99, 57, 55, 56, 56, 100, 56, 55, 56, 56, 100, 100, 51, 100, 53, 48, 56, 34, 125]
2025-12-19 15:53:59.371 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@2584b130, simpUser=75ef8e90f4a14c37a6055be614132d3d, simpSessionId=ok3gjou4, simpDestination=/ws/privateMessage}
2025-12-19 15:53:59.371 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試","id":"576727c41b68434c9788d8788dd3d508"}
2025-12-19 15:53:59.371 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/privateMessage
2025-12-19 15:53:59.372 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /privateMessage
2025-12-19 15:53:59.372 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/privateMessage")
2025-12-19 15:53:59.372 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:59.372 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:53:59.372 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:53:59.372 [http-nio-8080-exec-7] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@2584b130, simpUser=75ef8e90f4a14c37a6055be614132d3d, simpSessionId=ok3gjou4, simpDestination=/ws/privateMessage}
2025-12-19 15:53:59.372 [http-nio-8080-exec-7] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/privateMessage
2025-12-19 15:53:59.372 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/privateMessage session=ok3gjou4, lookupDestination='/privateMessage'
2025-12-19 15:53:59.372 [clientInboundChannel-3] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/privateMessage]}]
2025-12-19 15:53:59.372 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#privateMessage[2 args]
2025-12-19 15:53:59.372 [clientInboundChannel-3] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [75ef8e90f4a14c37a6055be614132d3d, Message(content=測試, recipient=null, id=576727c41b68434c9788d8788dd3d508)]
2025-12-19 15:53:59.372 [clientInboundChannel-3] ERROR c.h.s.MessageController - === 私信接收開始（ERROR 級別確保可見） ===
2025-12-19 15:53:59.372 [clientInboundChannel-3] INFO  c.h.s.MessageController - === 私信接收開始 ===
2025-12-19 15:53:59.372 [clientInboundChannel-3] INFO  c.h.s.MessageController - 收到私信請求，發送者: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:59.372 [clientInboundChannel-3] INFO  c.h.s.MessageController - 訊息物件: Message(content=測試, recipient=null, id=576727c41b68434c9788d8788dd3d508)
2025-12-19 15:53:59.372 [clientInboundChannel-3] INFO  c.h.s.MessageController - === 私信發送調試 ===
2025-12-19 15:53:59.374 [clientInboundChannel-3] INFO  c.h.s.MessageController - 發送者ID: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:59.374 [clientInboundChannel-3] INFO  c.h.s.MessageController - 接收者ID: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:59.374 [clientInboundChannel-3] INFO  c.h.s.MessageController - 訊息內容: 測試
2025-12-19 15:53:59.374 [clientInboundChannel-3] INFO  c.h.s.MessageController - 目標路徑: /user/576727c41b68434c9788d8788dd3d508/topic/privateMessage
2025-12-19 15:53:59.374 [clientInboundChannel-3] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/576727c41b68434c9788d8788dd3d508/topic/privateMessage -> [/topic/privateMessage-useru2ja0uv2]
2025-12-19 15:53:59.374 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/privateMessage-useru2ja0uv2 session=null payload={"content":"用戶：75ef8e90f4a14c37a6055be614132d3d發送的信息：測試"}
2025-12-19 15:53:59.374 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-12-19 15:53:59.375 [clientInboundChannel-3] INFO  c.h.s.MessageController - 私信已發送到目標用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:59.375 [clientInboundChannel-3] INFO  c.h.s.MessageController - === 私信處理完成 ===
2025-12-19 15:53:59.375 [clientOutboundChannel-8] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP MESSAGE, headers={destination=[/user/topic/privateMessage], content-type=[application/json], subscription=[sub-1], message-id=[u2ja0uv2-5]}
2025-12-19 15:53:59.779 [http-nio-8080-exec-8] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/privateMessage], content-length=[60]} session=null
2025-12-19 15:53:59.779 [http-nio-8080-exec-8] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/privateMessage session=ok3gjou4
2025-12-19 15:53:59.779 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:53:59.779 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:53:59.779 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/privateMessage
2025-12-19 15:53:59.779 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: ok3gjou4
2025-12-19 15:53:59.779 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:59.779 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:59.779 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:53:59.779 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:53:59.779 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, 34, 44, 34, 105, 100, 34, 58, 34, 53, 55, 54, 55, 50, 55, 99, 52, 49, 98, 54, 56, 52, 51, 52, 99, 57, 55, 56, 56, 100, 56, 55, 56, 56, 100, 100, 51, 100, 53, 48, 56, 34, 125]
2025-12-19 15:53:59.780 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@beff8d5, simpUser=75ef8e90f4a14c37a6055be614132d3d, simpSessionId=ok3gjou4, simpDestination=/ws/privateMessage}
2025-12-19 15:53:59.780 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試","id":"576727c41b68434c9788d8788dd3d508"}
2025-12-19 15:53:59.780 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/privateMessage
2025-12-19 15:53:59.780 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /privateMessage
2025-12-19 15:53:59.780 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/privateMessage")
2025-12-19 15:53:59.780 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:53:59.780 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:53:59.780 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:53:59.780 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@beff8d5, simpUser=75ef8e90f4a14c37a6055be614132d3d, simpSessionId=ok3gjou4, simpDestination=/ws/privateMessage}
2025-12-19 15:53:59.780 [http-nio-8080-exec-8] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/privateMessage
2025-12-19 15:53:59.780 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/privateMessage session=ok3gjou4, lookupDestination='/privateMessage'
2025-12-19 15:53:59.781 [clientInboundChannel-6] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/privateMessage]}]
2025-12-19 15:53:59.781 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#privateMessage[2 args]
2025-12-19 15:53:59.781 [clientInboundChannel-6] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [75ef8e90f4a14c37a6055be614132d3d, Message(content=測試, recipient=null, id=576727c41b68434c9788d8788dd3d508)]
2025-12-19 15:53:59.781 [clientInboundChannel-6] ERROR c.h.s.MessageController - === 私信接收開始（ERROR 級別確保可見） ===
2025-12-19 15:53:59.781 [clientInboundChannel-6] INFO  c.h.s.MessageController - === 私信接收開始 ===
2025-12-19 15:53:59.781 [clientInboundChannel-6] INFO  c.h.s.MessageController - 收到私信請求，發送者: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:59.781 [clientInboundChannel-6] INFO  c.h.s.MessageController - 訊息物件: Message(content=測試, recipient=null, id=576727c41b68434c9788d8788dd3d508)
2025-12-19 15:53:59.781 [clientInboundChannel-6] INFO  c.h.s.MessageController - === 私信發送調試 ===
2025-12-19 15:53:59.781 [clientInboundChannel-6] INFO  c.h.s.MessageController - 發送者ID: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:53:59.781 [clientInboundChannel-6] INFO  c.h.s.MessageController - 接收者ID: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:59.781 [clientInboundChannel-6] INFO  c.h.s.MessageController - 訊息內容: 測試
2025-12-19 15:53:59.781 [clientInboundChannel-6] INFO  c.h.s.MessageController - 目標路徑: /user/576727c41b68434c9788d8788dd3d508/topic/privateMessage
2025-12-19 15:53:59.782 [clientInboundChannel-6] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/576727c41b68434c9788d8788dd3d508/topic/privateMessage -> [/topic/privateMessage-useru2ja0uv2]
2025-12-19 15:53:59.782 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/privateMessage-useru2ja0uv2 session=null payload={"content":"用戶：75ef8e90f4a14c37a6055be614132d3d發送的信息：測試"}
2025-12-19 15:53:59.782 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-12-19 15:53:59.782 [clientInboundChannel-6] INFO  c.h.s.MessageController - 私信已發送到目標用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:53:59.782 [clientInboundChannel-6] INFO  c.h.s.MessageController - === 私信處理完成 ===
2025-12-19 15:53:59.782 [clientOutboundChannel-9] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP MESSAGE, headers={destination=[/user/topic/privateMessage], content-type=[application/json], subscription=[sub-1], message-id=[u2ja0uv2-6]}
2025-12-19 15:54:00.146 [http-nio-8080-exec-9] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/privateMessage], content-length=[60]} session=null
2025-12-19 15:54:00.146 [http-nio-8080-exec-9] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/privateMessage session=ok3gjou4
2025-12-19 15:54:00.146 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:54:00.146 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:54:00.146 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/privateMessage
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: ok3gjou4
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, 34, 44, 34, 105, 100, 34, 58, 34, 53, 55, 54, 55, 50, 55, 99, 52, 49, 98, 54, 56, 52, 51, 52, 99, 57, 55, 56, 56, 100, 56, 55, 56, 56, 100, 100, 51, 100, 53, 48, 56, 34, 125]
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@2da54fea, simpUser=75ef8e90f4a14c37a6055be614132d3d, simpSessionId=ok3gjou4, simpDestination=/ws/privateMessage}
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試","id":"576727c41b68434c9788d8788dd3d508"}
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/privateMessage
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /privateMessage
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/privateMessage")
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@2da54fea, simpUser=75ef8e90f4a14c37a6055be614132d3d, simpSessionId=ok3gjou4, simpDestination=/ws/privateMessage}
2025-12-19 15:54:00.147 [http-nio-8080-exec-9] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/privateMessage
2025-12-19 15:54:00.147 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/privateMessage session=ok3gjou4, lookupDestination='/privateMessage'
2025-12-19 15:54:00.147 [clientInboundChannel-8] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/privateMessage]}]
2025-12-19 15:54:00.147 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#privateMessage[2 args]
2025-12-19 15:54:00.148 [clientInboundChannel-8] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [75ef8e90f4a14c37a6055be614132d3d, Message(content=測試, recipient=null, id=576727c41b68434c9788d8788dd3d508)]
2025-12-19 15:54:00.148 [clientInboundChannel-8] ERROR c.h.s.MessageController - === 私信接收開始（ERROR 級別確保可見） ===
2025-12-19 15:54:00.148 [clientInboundChannel-8] INFO  c.h.s.MessageController - === 私信接收開始 ===
2025-12-19 15:54:00.148 [clientInboundChannel-8] INFO  c.h.s.MessageController - 收到私信請求，發送者: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:54:00.148 [clientInboundChannel-8] INFO  c.h.s.MessageController - 訊息物件: Message(content=測試, recipient=null, id=576727c41b68434c9788d8788dd3d508)
2025-12-19 15:54:00.148 [clientInboundChannel-8] INFO  c.h.s.MessageController - === 私信發送調試 ===
2025-12-19 15:54:00.149 [clientInboundChannel-8] INFO  c.h.s.MessageController - 發送者ID: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:54:00.149 [clientInboundChannel-8] INFO  c.h.s.MessageController - 接收者ID: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:54:00.149 [clientInboundChannel-8] INFO  c.h.s.MessageController - 訊息內容: 測試
2025-12-19 15:54:00.149 [clientInboundChannel-8] INFO  c.h.s.MessageController - 目標路徑: /user/576727c41b68434c9788d8788dd3d508/topic/privateMessage
2025-12-19 15:54:00.150 [clientInboundChannel-8] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/576727c41b68434c9788d8788dd3d508/topic/privateMessage -> [/topic/privateMessage-useru2ja0uv2]
2025-12-19 15:54:00.150 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/privateMessage-useru2ja0uv2 session=null payload={"content":"用戶：75ef8e90f4a14c37a6055be614132d3d發送的信息：測試"}
2025-12-19 15:54:00.150 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-12-19 15:54:00.151 [clientInboundChannel-8] INFO  c.h.s.MessageController - 私信已發送到目標用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:54:00.152 [clientInboundChannel-8] INFO  c.h.s.MessageController - === 私信處理完成 ===
2025-12-19 15:54:00.152 [clientOutboundChannel-10] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP MESSAGE, headers={destination=[/user/topic/privateMessage], content-type=[application/json], subscription=[sub-1], message-id=[u2ja0uv2-7]}
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/privateMessage], content-length=[60]} session=null
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/privateMessage session=ok3gjou4
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/privateMessage
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: ok3gjou4
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, 34, 44, 34, 105, 100, 34, 58, 34, 53, 55, 54, 55, 50, 55, 99, 52, 49, 98, 54, 56, 52, 51, 52, 99, 57, 55, 56, 56, 100, 56, 55, 56, 56, 100, 100, 51, 100, 53, 48, 56, 34, 125]
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@75279865, simpUser=75ef8e90f4a14c37a6055be614132d3d, simpSessionId=ok3gjou4, simpDestination=/ws/privateMessage}
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試","id":"576727c41b68434c9788d8788dd3d508"}
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/privateMessage
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /privateMessage
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/privateMessage")
2025-12-19 15:54:00.510 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:54:00.511 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:54:00.511 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:54:00.511 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@75279865, simpUser=75ef8e90f4a14c37a6055be614132d3d, simpSessionId=ok3gjou4, simpDestination=/ws/privateMessage}
2025-12-19 15:54:00.511 [http-nio-8080-exec-10] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/privateMessage
2025-12-19 15:54:00.511 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/privateMessage session=ok3gjou4, lookupDestination='/privateMessage'
2025-12-19 15:54:00.511 [clientInboundChannel-12] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/privateMessage]}]
2025-12-19 15:54:00.511 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#privateMessage[2 args]
2025-12-19 15:54:00.511 [clientInboundChannel-12] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [75ef8e90f4a14c37a6055be614132d3d, Message(content=測試, recipient=null, id=576727c41b68434c9788d8788dd3d508)]
2025-12-19 15:54:00.511 [clientInboundChannel-12] ERROR c.h.s.MessageController - === 私信接收開始（ERROR 級別確保可見） ===
2025-12-19 15:54:00.511 [clientInboundChannel-12] INFO  c.h.s.MessageController - === 私信接收開始 ===
2025-12-19 15:54:00.511 [clientInboundChannel-12] INFO  c.h.s.MessageController - 收到私信請求，發送者: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:54:00.511 [clientInboundChannel-12] INFO  c.h.s.MessageController - 訊息物件: Message(content=測試, recipient=null, id=576727c41b68434c9788d8788dd3d508)
2025-12-19 15:54:00.512 [clientInboundChannel-12] INFO  c.h.s.MessageController - === 私信發送調試 ===
2025-12-19 15:54:00.512 [clientInboundChannel-12] INFO  c.h.s.MessageController - 發送者ID: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:54:00.512 [clientInboundChannel-12] INFO  c.h.s.MessageController - 接收者ID: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:54:00.512 [clientInboundChannel-12] INFO  c.h.s.MessageController - 訊息內容: 測試
2025-12-19 15:54:00.512 [clientInboundChannel-12] INFO  c.h.s.MessageController - 目標路徑: /user/576727c41b68434c9788d8788dd3d508/topic/privateMessage
2025-12-19 15:54:00.512 [clientInboundChannel-12] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/576727c41b68434c9788d8788dd3d508/topic/privateMessage -> [/topic/privateMessage-useru2ja0uv2]
2025-12-19 15:54:00.512 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/privateMessage-useru2ja0uv2 session=null payload={"content":"用戶：75ef8e90f4a14c37a6055be614132d3d發送的信息：測試"}
2025-12-19 15:54:00.512 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-12-19 15:54:00.512 [clientInboundChannel-12] INFO  c.h.s.MessageController - 私信已發送到目標用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:54:00.512 [clientInboundChannel-12] INFO  c.h.s.MessageController - === 私信處理完成 ===
2025-12-19 15:54:00.512 [clientOutboundChannel-11] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP MESSAGE, headers={destination=[/user/topic/privateMessage], content-type=[application/json], subscription=[sub-1], message-id=[u2ja0uv2-8]}
2025-12-19 15:54:01.689 [http-nio-8080-exec-1] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/privateMessage], content-length=[60]} session=null
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/privateMessage session=ok3gjou4
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/privateMessage
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: ok3gjou4
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, 34, 44, 34, 105, 100, 34, 58, 34, 53, 55, 54, 55, 50, 55, 99, 52, 49, 98, 54, 56, 52, 51, 52, 99, 57, 55, 56, 56, 100, 56, 55, 56, 56, 100, 100, 51, 100, 53, 48, 56, 34, 125]
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@2589f48a, simpUser=75ef8e90f4a14c37a6055be614132d3d, simpSessionId=ok3gjou4, simpDestination=/ws/privateMessage}
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試","id":"576727c41b68434c9788d8788dd3d508"}
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/privateMessage
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /privateMessage
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/privateMessage")
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/privateMessage], content-length=[60]}, simpSessionAttributes={}, simpHeartbeat=[J@2589f48a, simpUser=75ef8e90f4a14c37a6055be614132d3d, simpSessionId=ok3gjou4, simpDestination=/ws/privateMessage}
2025-12-19 15:54:01.690 [http-nio-8080-exec-1] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/privateMessage
2025-12-19 15:54:01.690 [clientInboundChannel-15] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/privateMessage session=ok3gjou4, lookupDestination='/privateMessage'
2025-12-19 15:54:01.690 [clientInboundChannel-15] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/privateMessage]}]
2025-12-19 15:54:01.691 [clientInboundChannel-15] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#privateMessage[2 args]
2025-12-19 15:54:01.691 [clientInboundChannel-15] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [75ef8e90f4a14c37a6055be614132d3d, Message(content=測試, recipient=null, id=576727c41b68434c9788d8788dd3d508)]
2025-12-19 15:54:01.691 [clientInboundChannel-15] ERROR c.h.s.MessageController - === 私信接收開始（ERROR 級別確保可見） ===
2025-12-19 15:54:01.691 [clientInboundChannel-15] INFO  c.h.s.MessageController - === 私信接收開始 ===
2025-12-19 15:54:01.691 [clientInboundChannel-15] INFO  c.h.s.MessageController - 收到私信請求，發送者: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:54:01.691 [clientInboundChannel-15] INFO  c.h.s.MessageController - 訊息物件: Message(content=測試, recipient=null, id=576727c41b68434c9788d8788dd3d508)
2025-12-19 15:54:01.691 [clientInboundChannel-15] INFO  c.h.s.MessageController - === 私信發送調試 ===
2025-12-19 15:54:01.691 [clientInboundChannel-15] INFO  c.h.s.MessageController - 發送者ID: 75ef8e90f4a14c37a6055be614132d3d
2025-12-19 15:54:01.691 [clientInboundChannel-15] INFO  c.h.s.MessageController - 接收者ID: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:54:01.691 [clientInboundChannel-15] INFO  c.h.s.MessageController - 訊息內容: 測試
2025-12-19 15:54:01.691 [clientInboundChannel-15] INFO  c.h.s.MessageController - 目標路徑: /user/576727c41b68434c9788d8788dd3d508/topic/privateMessage
2025-12-19 15:54:01.693 [clientInboundChannel-15] TRACE o.s.m.s.u.UserDestinationMessageHandler - Translated /user/576727c41b68434c9788d8788dd3d508/topic/privateMessage -> [/topic/privateMessage-useru2ja0uv2]
2025-12-19 15:54:01.693 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/privateMessage-useru2ja0uv2 session=null payload={"content":"用戶：75ef8e90f4a14c37a6055be614132d3d發送的信息：測試"}
2025-12-19 15:54:01.693 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-12-19 15:54:01.693 [clientInboundChannel-15] INFO  c.h.s.MessageController - 私信已發送到目標用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:54:01.693 [clientInboundChannel-15] INFO  c.h.s.MessageController - === 私信處理完成 ===
2025-12-19 15:54:01.694 [clientOutboundChannel-12] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP MESSAGE, headers={destination=[/user/topic/privateMessage], content-type=[application/json], subscription=[sub-1], message-id=[u2ja0uv2-9]}
2025-12-19 15:54:04.181 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:54:09.186 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:54:14.202 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:54:19.209 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:54:24.212 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:54:29.221 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:54:34.231 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:54:39.239 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:54:44.258 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:54:49.263 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:54:54.272 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:54:59.284 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:04.301 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:09.313 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:14.318 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:19.330 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:24.334 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:29.340 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:34.347 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:39.365 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:44.378 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:49.391 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:54.398 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:55:56.814 [http-nio-8080-exec-4] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/message], content-length=[20]} session=null
2025-12-19 15:55:56.814 [http-nio-8080-exec-4] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/message session=u2ja0uv2
2025-12-19 15:55:56.814 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:55:56.814 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:55:56.814 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/message
2025-12-19 15:55:56.814 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: u2ja0uv2
2025-12-19 15:55:56.814 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 576727c41b68434c9788d8788dd3d508
2025-12-19 15:55:56.814 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:55:56.814 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:55:56.815 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:55:56.815 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, 34, 125]
2025-12-19 15:55:56.815 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/message], content-length=[20]}, simpSessionAttributes={}, simpHeartbeat=[J@4913802e, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/message}
2025-12-19 15:55:56.815 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試"}
2025-12-19 15:55:56.815 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/message
2025-12-19 15:55:56.815 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /message
2025-12-19 15:55:56.815 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/message")
2025-12-19 15:55:56.815 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:55:56.815 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:55:56.815 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:55:56.815 [http-nio-8080-exec-4] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/message], content-length=[20]}, simpSessionAttributes={}, simpHeartbeat=[J@4913802e, simpUser=576727c41b68434c9788d8788dd3d508, simpSessionId=u2ja0uv2, simpDestination=/ws/message}
2025-12-19 15:55:56.816 [http-nio-8080-exec-4] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/message
2025-12-19 15:55:56.816 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/message session=u2ja0uv2, lookupDestination='/message'
2025-12-19 15:55:56.816 [clientInboundChannel-33] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/message]}]
2025-12-19 15:55:56.817 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#message[1 args]
2025-12-19 15:55:56.817 [clientInboundChannel-33] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [Message(content=測試, recipient=null, id=null)]
2025-12-19 15:55:56.817 [clientInboundChannel-33] INFO  c.h.s.MessageController - === 公共訊息接收 ===
2025-12-19 15:55:56.818 [clientInboundChannel-33] INFO  c.h.s.MessageController - 訊息內容: 測試
2025-12-19 15:55:56.818 [clientInboundChannel-33] INFO  c.h.s.MessageController - 發布到 Redis /topic/chat 頻道
2025-12-19 15:55:56.829 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle RedisConnectionFailureException
2025-12-19 15:55:56.833 [clientInboundChannel-33] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is org.springframework.data.redis.connection.PoolException: Could not get a resource from the pool; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:210)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:190)
	at org.springframework.data.redis.core.RedisTemplate.convertAndSend(RedisTemplate.java:847)
	at com.hejz.springbootstomp.RedisMessagePublisher.publish(RedisMessagePublisher.java:88)
	at com.hejz.springbootstomp.RedisMessagePublisher.publish(RedisMessagePublisher.java:124)
	at com.hejz.springbootstomp.MessageController.message(MessageController.java:87)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:569)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:511)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:94)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:524)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:458)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:144)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.springframework.data.redis.connection.PoolException: Could not get a resource from the pool; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
	at org.springframework.data.redis.connection.lettuce.LettucePoolingConnectionProvider.getConnection(LettucePoolingConnectionProvider.java:109)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 28 common frames omitted
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettucePoolingConnectionProvider.lambda$null$0(LettucePoolingConnectionProvider.java:97)
	at io.lettuce.core.support.ConnectionPoolSupport$RedisPooledObjectFactory.create(ConnectionPoolSupport.java:211)
	at io.lettuce.core.support.ConnectionPoolSupport$RedisPooledObjectFactory.create(ConnectionPoolSupport.java:201)
	at org.apache.commons.pool2.BasePooledObjectFactory.makeObject(BasePooledObjectFactory.java:70)
	at org.apache.commons.pool2.impl.GenericObjectPool.create(GenericObjectPool.java:571)
	at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:298)
	at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:223)
	at io.lettuce.core.support.ConnectionPoolSupport$1.borrowObject(ConnectionPoolSupport.java:122)
	at io.lettuce.core.support.ConnectionPoolSupport$1.borrowObject(ConnectionPoolSupport.java:117)
	at org.springframework.data.redis.connection.lettuce.LettucePoolingConnectionProvider.getConnection(LettucePoolingConnectionProvider.java:103)
	... 29 common frames omitted
Caused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:137)
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:110)
	at io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)
	at io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:746)
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:681)
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:598)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
2025-12-19 15:55:59.411 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:56:02.340 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3c54ddec
2025-12-19 15:56:02.340 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/our-websocket/info?t=1766130962336
2025-12-19 15:56:02.357 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3c54ddec
2025-12-19 15:56:02.359 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/our-websocket/610/oufpxzfj/websocket
2025-12-19 15:56:02.360 [http-nio-8080-exec-7] INFO  c.h.s.Userhandshakehandler - 登入用戶 ID: 57c22d47bfa6416f80c03977ee705813
2025-12-19 15:56:02.372 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=oufpxzfj]
2025-12-19 15:56:02.377 [http-nio-8080-exec-8] TRACE o.s.m.simp.stomp.StompDecoder - Decoded CONNECT {accept-version=[1.1,1.0], heart-beat=[10000,10000]} session=null
2025-12-19 15:56:02.377 [http-nio-8080-exec-8] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: CONNECT user=57c22d47bfa6416f80c03977ee705813 session=oufpxzfj
2025-12-19 15:56:02.377 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:56:02.377 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: CONNECT
2025-12-19 15:56:02.377 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: null
2025-12-19 15:56:02.377 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: oufpxzfj
2025-12-19 15:56:02.377 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 57c22d47bfa6416f80c03977ee705813
2025-12-19 15:56:02.377 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:56:02.378 [http-nio-8080-exec-8] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): CONNECT
2025-12-19 15:56:02.379 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=57c22d47bfa6416f80c03977ee705813 session=oufpxzfj
2025-12-19 15:56:02.380 [clientOutboundChannel-13] TRACE o.s.m.simp.stomp.StompEncoder - Encoding STOMP CONNECTED, headers={version=[1.1], heart-beat=[0,0], user-name=[57c22d47bfa6416f80c03977ee705813]}
2025-12-19 15:56:02.399 [http-nio-8080-exec-9] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SUBSCRIBE {id=[sub-0], destination=[/topic/chat]} session=null
2025-12-19 15:56:02.399 [http-nio-8080-exec-9] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SUBSCRIBE /topic/chat id=sub-0 session=oufpxzfj
2025-12-19 15:56:02.399 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:56:02.399 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SUBSCRIBE
2025-12-19 15:56:02.399 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /topic/chat
2025-12-19 15:56:02.399 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: oufpxzfj
2025-12-19 15:56:02.399 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 57c22d47bfa6416f80c03977ee705813
2025-12-19 15:56:02.399 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:56:02.399 [http-nio-8080-exec-9] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): SUBSCRIBE
2025-12-19 15:56:02.400 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/chat id=sub-0 session=oufpxzfj
2025-12-19 15:56:04.420 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] TRACE o.s.m.simp.stomp.StompDecoder - Decoded SEND {destination=[/ws/message], content-length=[20]} session=null
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] TRACE o.s.w.s.m.StompSubProtocolHandler - From client: SEND /ws/message session=oufpxzfj
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - === WebSocket 訊息攔截 ===
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - STOMP 命令: SEND
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑: /ws/message
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 會話 ID: oufpxzfj
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 用戶: 57c22d47bfa6416f80c03977ee705813
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息類型 (simpMessageType): MESSAGE
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容類型: [B
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容: [123, 34, 99, 111, 110, 116, 101, 110, 116, 34, 58, 34, -26, -72, -84, -24, -87, -90, 34, 125]
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息頭: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/message], content-length=[20]}, simpSessionAttributes={}, simpHeartbeat=[J@24704367, simpUser=57c22d47bfa6416f80c03977ee705813, simpSessionId=oufpxzfj, simpDestination=/ws/message}
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息內容（字串）: {"content":"測試"}
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 目標路徑（用於路由）: /ws/message
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 預期的 @MessageMapping 路徑: /message
2025-12-19 15:56:08.857 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 應該匹配 @MessageMapping("/message")
2025-12-19 15:56:08.858 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道類型: org.springframework.messaging.support.ExecutorSubscribableChannel
2025-12-19 15:56:08.858 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 訊息通道字符串: ExecutorSubscribableChannel[clientInboundChannel]
2025-12-19 15:56:08.858 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - ✓ 訊息已進入 clientInboundChannel
2025-12-19 15:56:08.858 [http-nio-8080-exec-10] INFO  c.h.s.config.WebSocketInterceptor - 完整訊息頭映射: {simpMessageType=MESSAGE, stompCommand=SEND, nativeHeaders={destination=[/ws/message], content-length=[20]}, simpSessionAttributes={}, simpHeartbeat=[J@24704367, simpUser=57c22d47bfa6416f80c03977ee705813, simpSessionId=oufpxzfj, simpDestination=/ws/message}
2025-12-19 15:56:08.858 [http-nio-8080-exec-10] WARN  c.h.s.config.WebSocketInterceptor - ⚠ 訊息在 clientInboundChannel 中處理，這可能不是預期的行為，目標: /ws/message
2025-12-19 15:56:08.859 [clientInboundChannel-42] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /ws/message session=oufpxzfj, lookupDestination='/message'
2025-12-19 15:56:08.859 [clientInboundChannel-42] TRACE o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Found 1 handler methods: [{[MESSAGE],[/message]}]
2025-12-19 15:56:08.859 [clientInboundChannel-42] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking MessageController#message[1 args]
2025-12-19 15:56:08.859 [clientInboundChannel-42] TRACE o.s.messaging.handler.HandlerMethod - Arguments: [Message(content=測試, recipient=null, id=null)]
2025-12-19 15:56:08.859 [clientInboundChannel-42] INFO  c.h.s.MessageController - === 公共訊息接收 ===
2025-12-19 15:56:08.859 [clientInboundChannel-42] INFO  c.h.s.MessageController - 訊息內容: 測試
2025-12-19 15:56:08.859 [clientInboundChannel-42] INFO  c.h.s.MessageController - 發布到 Redis /topic/chat 頻道
2025-12-19 15:56:08.862 [clientInboundChannel-42] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle RedisConnectionFailureException
2025-12-19 15:56:08.863 [clientInboundChannel-42] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is org.springframework.data.redis.connection.PoolException: Could not get a resource from the pool; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1689)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1597)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1383)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1366)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1093)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:421)
	at org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:193)
	at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:144)
	at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:105)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:210)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:190)
	at org.springframework.data.redis.core.RedisTemplate.convertAndSend(RedisTemplate.java:847)
	at com.hejz.springbootstomp.RedisMessagePublisher.publish(RedisMessagePublisher.java:88)
	at com.hejz.springbootstomp.RedisMessagePublisher.publish(RedisMessagePublisher.java:124)
	at com.hejz.springbootstomp.MessageController.message(MessageController.java:87)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:569)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:511)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:94)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:524)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:458)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:144)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.springframework.data.redis.connection.PoolException: Could not get a resource from the pool; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
	at org.springframework.data.redis.connection.lettuce.LettucePoolingConnectionProvider.getConnection(LettucePoolingConnectionProvider.java:109)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1595)
	... 28 common frames omitted
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:330)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:216)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:115)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:115)
	at org.springframework.data.redis.connection.lettuce.LettucePoolingConnectionProvider.lambda$null$0(LettucePoolingConnectionProvider.java:97)
	at io.lettuce.core.support.ConnectionPoolSupport$RedisPooledObjectFactory.create(ConnectionPoolSupport.java:211)
	at io.lettuce.core.support.ConnectionPoolSupport$RedisPooledObjectFactory.create(ConnectionPoolSupport.java:201)
	at org.apache.commons.pool2.BasePooledObjectFactory.makeObject(BasePooledObjectFactory.java:70)
	at org.apache.commons.pool2.impl.GenericObjectPool.create(GenericObjectPool.java:571)
	at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:298)
	at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:223)
	at io.lettuce.core.support.ConnectionPoolSupport$1.borrowObject(ConnectionPoolSupport.java:122)
	at io.lettuce.core.support.ConnectionPoolSupport$1.borrowObject(ConnectionPoolSupport.java:117)
	at org.springframework.data.redis.connection.lettuce.LettucePoolingConnectionProvider.getConnection(LettucePoolingConnectionProvider.java:103)
	... 29 common frames omitted
Caused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:137)
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:110)
	at io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)
	at io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:746)
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:681)
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:598)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
2025-12-19 15:56:09.434 [pool-2-thread-1] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:56:14.441 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:56:19.449 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
2025-12-19 15:56:24.459 [pool-2-thread-2] ERROR o.s.d.r.l.RedisMessageListenerContainer - Connection failure occurred. Restarting subscription task after 5000 ms
